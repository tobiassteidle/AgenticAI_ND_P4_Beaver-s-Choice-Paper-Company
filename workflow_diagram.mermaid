flowchart TD
  subgraph ORCH["Orchestrator Agent"]
    O1["Receive customer request"]
    O2["Classify: INQUIRY or ORDER"]
  end
  subgraph INV["Inventory Agent"]
    I1["get_stock_level"]
    I2["get_supplier_delivery_date"]
    I3["create_transaction for restocking"]
  end
  subgraph QUOTE["Quote Agent"]
    Q1["search_quote_history"]
    Q2["generate_financial_report"]
    Q3["generate strategic quote"]
  end
  subgraph SALES["Sales Finalization Agent"]
    S1["get_stock_level"]
    S2["get_supplier_delivery_date"]
    S3["create_transaction for sales"]
  end
  subgraph INVOICE["Invoice Agent"]
    V1["Format invoice text"]
    V2["Insert placeholders if data missing"]
    V3["Show discounts if applied"]
  end
  subgraph s1["Inventory Agent"]
    n1["get_stock_level"]
    n2["get_supplier_delivery_date"]
  end
  O1 --> O2
  O2 -- INQUIRY --> s1
  INV --> I1 & I2 & I1 & QUOTE
  O2 -- ORDER --> INV
  I1 -- Not enough stock --> I3
  QUOTE --> Q1 & Q2 & Q3 & SALES
  SALES --> S1 & S2 & S3 & INVOICE
  INVOICE --> V1 & V2 & V3
  s1 --> n1 & n2 & n1
